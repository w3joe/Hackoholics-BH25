# Hackoholics-BH25: OCRManager

This repository contains an optimized OCR (Optical Character Recognition) pipeline built for the **TIL-AI 2025 OCR Challenge**. It is designed to extract clean text from document-like images with a strong focus on **accuracy** while balancing **runtime performance**.

---

## ğŸ§  What This Does

The project centers around the `OCRManager` class â€” a lightweight Python wrapper around Tesseract OCR, with efficient image preprocessing using:

- ğŸ§  **Tesseract OCR** (via PyTesseract) for text recognition  
- ğŸ–¼ **OpenCV** and **Pillow** for image loading and transformation  
- âš™ï¸ Optional thresholding (disabled by default for better performance)  
- â± Timeout-based OCR calls for robust inference under time constraints  

---

## ğŸ”§ What I Changed / Explored

### âœ… Final Configuration (Best Balance)

- **Binarization disabled**  
  - Initially added Otsu thresholding, but this hurt both **accuracy** and **speed**. Disabling it worked best for clean document text.

- **Capped image resolution (max dimension = 960px)**  
  - Upscaled images gave higher accuracy but increased runtime.
  - After tuning, I found that resizing large images down to 960px on the longest edge yielded the best trade-off.

- **Single-threaded inference (no batch)**  
  - Due to server constraints and simplicity, I focused on optimizing single-image inference speed.

---

### ğŸ§ª Experiment: PaddleOCR ONNX

I also tested [OnnxOCR by jingsongliujing](https://github.com/jingsongliujing/OnnxOCR), which uses PaddleOCR converted to ONNX format:

- âœ… Accuracy: **0.98** (slightly better than Tesseract)
- âŒ Speed: **0.30** (significantly slower than Tesseract setup)

Despite better results, I could not parallelize or speed up ONNX inference enough to justify switching in the current setup.

---

## ğŸ“Š Final Scores on TIL-AI Eval Server

| Engine         | Accuracy | Speed |
|----------------|----------|-------|
| Tesseract OCR  | **0.94** | **0.73** |
| PaddleOCR ONNX | **0.98** | **0.30** |

The current repo uses the Tesseract-based implementation for its excellent balance of performance and quality.

---

## ğŸ§¾ Usage Example

```python
from ocr_manager import OCRManager

ocr = OCRManager(binarize=False)

# Read a document image and run OCR
with open("sample.jpg", "rb") as f:
    result = ocr.ocr(f.read())

print(result)

